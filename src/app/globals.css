/* stylelint-disable at-rule-no-unknown */
@tailwind base;
@tailwind components;
@tailwind utilities;
/* stylelint-enable at-rule-no-unknown */

:root {
  --fg: 15 23 42; /* slate-900 */
}

html, body, #__next {
  height: 100%;
  overflow-y: scroll; /* Prevent layout shift from scrollbar */
}

body {
  color: rgb(var(--fg));
  font-family: -apple-system, BlinkMacSystemFont, "SF Pro Text", "SF Pro Display", "Segoe UI", Roboto, Helvetica, Arial, "Apple Color Emoji", "Segoe UI Emoji";
  /* Default: light background over blueprint image */
  background-image:
    /* Satisfying Theme: Fresh Air & Subtle Aurora */
    radial-gradient(at 0% 0%, rgba(224, 242, 254, 0.7) 0px, transparent 50%), /* Sky 100 */
    radial-gradient(at 100% 0%, rgba(236, 254, 255, 0.6) 0px, transparent 50%), /* Cyan 50 */
    radial-gradient(at 100% 100%, rgba(245, 243, 255, 0.6) 0px, transparent 50%), /* Violet 50 */
    radial-gradient(at 0% 100%, rgba(255, 255, 255, 0.8) 0px, transparent 60%), /* Pure White Base */
    url('/blueprint-grid.svg');
  background-size: 100% 100%, 100% 100%, 100% 100%, 100% 100%, cover;
  background-position: center;
  background-attachment: fixed;
  transition: background 300ms ease, color 200ms ease;
}

@keyframes float {
  0%, 100% { transform: translateY(0); }
  50% { transform: translateY(-4px); }
}

.animate-float {
  animation: float 3s ease-in-out infinite;
}

/* Theme: Dark */
[data-theme='dark'] {
  --fg: 226 232 240; /* slate-200 */
}
[data-theme='dark'] body {
  background-image:
    linear-gradient(0deg, rgba(11,18,32,0.50), rgba(11,18,32,0.50)),
    radial-gradient(1200px 600px at 20% -10%, rgba(14,165,233,0.10), transparent),
    radial-gradient(1000px 500px at 80% -20%, rgba(99,102,241,0.10), transparent),
    url('/blueprint-grid.svg'); /* same image; overlay darkens */
  background-size: auto, auto, auto, cover;
  background-position: center top, center top, center top, center;
  background-attachment: fixed, fixed, fixed, fixed;
}

/* Reusable utility classes */
.container-px { padding-left: 1rem; padding-right: 1rem; }
@media (min-width: 768px) { .container-px { padding-left: 2rem; padding-right: 2rem; } }

.card {
  border-radius: 1rem; /* 2xl */
  border: 1px solid rgba(255,255,255,0.6);
  background-color: rgba(255,255,255,0.6);
  box-shadow: 0 10px 15px rgba(0,0,0,0.06);
  -webkit-backdrop-filter: blur(12px);
  backdrop-filter: blur(12px);
}

.badge { display: inline-flex; align-items: center; border-radius: 9999px; padding: 0.125rem 0.625rem; font-size: 0.75rem; font-weight: 500; background-color: #e0f2fe; color: #0369a1; }

/* Utilities */
.icon-btn { display:inline-flex; align-items:center; justify-content:center; border-radius:9999px; border:1px solid rgba(255,255,255,0.6); background-color: rgba(255,255,255,0.8); color:#334155; box-shadow:0 1px 2px rgba(0,0,0,0.08); -webkit-backdrop-filter: blur(6px); backdrop-filter: blur(6px); transition: background-color .15s ease; }
[data-theme='dark'] .icon-btn { border-color: rgba(255,255,255,0.35); background-color: rgba(30,41,59,0.6); color:#e2e8f0; }
.icon-btn:hover { background-color: rgba(255,255,255,0.9); }
[data-theme='dark'] .icon-btn:hover { background-color: rgba(30,41,59,0.9); }

/* Circuit drawings (SVG) inherit currentColor for strokes */
.circuit {
  color: rgb(15 23 42); /* slate-900 */
  /* background color of circuit fill areas (e.g., inversion bubbles) */
  --circuit-bg: #f8fafc; /* light: slate-50 */
  transition: color 200ms ease;
}
[data-theme='dark'] .circuit {
  color: rgb(226 232 240); /* slate-200 */
  --circuit-bg: #0b1220; /* dark background color for visible bubbles */
}
svg.circuit * { shape-rendering: geometricPrecision; vector-effect: non-scaling-stroke; }

.tt-head { background-color: rgba(255,255,255,0.9); color:#374151; -webkit-backdrop-filter: blur(4px); backdrop-filter: blur(4px); }
[data-theme='dark'] .tt-head { background-color: rgba(15,23,42,0.7); color:#f1f5f9; }
.tt-row-alt { background-color: rgba(248,250,252,0.6); }
[data-theme='dark'] .tt-row-alt { background-color: rgba(31,41,55,0.3); }

.input-lg {
  border-radius: 1rem;
  border: 1px solid transparent;
  background-color: rgba(255, 255, 255, 0.6);
  padding: 0.75rem 1rem;
  font-size: 1rem;
  box-shadow:
    inset 0 2px 4px rgba(0, 0, 0, 0.02),
    0 1px 2px rgba(0, 0, 0, 0.02),
    0 0 0 1px rgba(0, 0, 0, 0.04); /* Faux border */
  -webkit-backdrop-filter: blur(18px);
  backdrop-filter: blur(18px);
  outline: none;
  transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
}
.input-lg:focus {
  background-color: #ffffff;
  box-shadow:
    0 0 0 4px rgba(15, 23, 42, 0.06), /* Slate 900 ring, very subtle */
    0 1px 2px rgba(0, 0, 0, 0.05),
    0 0 0 1px rgba(15, 23, 42, 0.15); /* Slate border */
  transform: scale(1.005);
}
[data-theme='dark'] .input-lg { border-color:#475569; background-color: rgba(2,6,23,0.24); color:#f1f5f9; -webkit-backdrop-filter: blur(18px); backdrop-filter: blur(18px); }
.input-lg::placeholder { color:#94a3b8; }

/* Minimal pill: high-contrast in dark mode */
.min-pill { display:inline-block; border-radius: 0.375rem; padding: 0.125rem 0.375rem; background: #FFFBEB; color:#92400e; border:1px solid #FDE68A; }
[data-theme='dark'] .min-pill { background: rgba(245,158,11,0.18); color:#fde68a; border-color: rgba(251,191,36,0.55); }

/* Card overrides by theme */
[data-theme='light'] .card {
  background: rgba(255, 255, 255, 0.8);
  border: 1px solid rgba(255, 255, 255, 1);
  box-shadow:
    0 25px 50px -12px rgba(0, 0, 0, 0.07), /* Very soft, deep shadow */
    0 0 0 1px rgba(255, 255, 255, 0.5) inset;
  -webkit-backdrop-filter: blur(24px);
  backdrop-filter: blur(24px);
}

/* Distinguishable Section Panels */
.section-panel {
  background: rgba(255, 255, 255, 0.5);
  border: 1px solid rgba(0, 0, 0, 0.06);
  border-radius: 1rem;
  padding: 1.25rem;
  box-shadow:
    0 2px 4px rgba(0, 0, 0, 0.02),
    0 0 0 1px rgba(255, 255, 255, 0.5) inset;
}
[data-theme='dark'] .section-panel {
  background: rgba(0, 0, 0, 0.2);
  border-color: rgba(255, 255, 255, 0.05);
}

[data-theme='dark'] .card { background: rgba(15,23,42,0.48); border-color:#334155; box-shadow: 0 10px 15px rgba(0,0,0,0.35); -webkit-backdrop-filter: blur(8px); backdrop-filter: blur(8px); }

/* Header/nav container per theme */
[data-theme='light'] .glass-nav {
  background: rgba(255, 255, 255, 0.9);
  border: 1px solid rgba(255, 255, 255, 0.5);
  box-shadow: 0 4px 20px -2px rgba(0, 0, 0, 0.03);
}
[data-theme='dark'] .glass-nav { background: rgba(15,23,42,0.5); border:1px solid #334155; box-shadow: 0 10px 15px rgba(0,0,0,0.35); }

/* Segmented control */
.segmented { border-radius: 9999px; padding: 0.25rem; font-size: 0.875rem; box-shadow: inset 0 1px 2px rgba(0,0,0,0.08); -webkit-backdrop-filter: blur(6px); backdrop-filter: blur(6px); overflow: hidden; }
[data-theme='light'] .segmented { background:#ffffff; }
[data-theme='dark'] .segmented { background: rgba(31,41,59,0.52); border:1px solid #334155; }
.segmented .indicator { position:absolute; border-radius: 9999px; box-shadow: 0 1px 2px rgba(0,0,0,0.18); }
[data-theme='light'] .segmented .indicator { background:#ffffff; }
[data-theme='dark'] .segmented .indicator { background: rgba(226,232,240,0.9); }

/* Mobile polish */
@media (max-width: 640px) {
  .card { border-radius: 0.75rem; }
}

/* 7â€‘segment tiny counter */
.sevenseg { display:inline-flex; align-items:center; gap: 2px; line-height: 1; }
.sevenseg-digit { display:block; width: 12px; height: 20px; }
.sevenseg-sep { display:inline-block; width: 6px; text-align:center; opacity: .6; }

/* Coffee steam animation for the counter pill */
.coffee-steam { opacity: 0; transform-box: fill-box; transform-origin: center; animation: coffee-steam-rise 1.8s ease-in-out infinite; }
.coffee-steam.s2 { animation-delay: .3s; }
.coffee-steam.s3 { animation-delay: .6s; }
@keyframes coffee-steam-rise {
  0% { opacity: 0; transform: translateY(3px); }
  20% { opacity: .9; }
  100% { opacity: 0; transform: translateY(-3px); }
}

/* Performance hint and accessibility */
.coffee-steam { will-change: transform, opacity; }
@media (prefers-reduced-motion: reduce) {
  .coffee-steam { animation: none; opacity: .6; }
}
